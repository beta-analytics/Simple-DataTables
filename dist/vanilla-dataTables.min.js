/*!
 *
 * Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (http://mobius.ovh)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 1.4.8
 *
 */
!function(t,e){var a="DataTable";"function"==typeof define&&define.amd?define([],e(a)):"object"==typeof exports?module.exports=e(a):t[a]=e(a)}(this,function(t){"use strict";var e=window,a=document,i=a.body,s={perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},n=function(t){return"[object Object]"===Object.prototype.toString.call(t)},r=function(t){return Array.isArray(t)},o=function(t){var e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!r(e)&&!n(e))&&e},l=function(t,e){for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];i&&n(i)?(t[a]=t[a]||{},l(t[a],i)):t[a]=i}return t},h=function(t,e,a){if(n(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(a,i,t[i]);else for(var s=0,r=t.length;s<r;s++)e.call(a,s,t[s])},d=function(t,e,a){t.addEventListener(e,a,!1)},c=function(t,e){var i=a.createElement(t);if(e&&"object"==typeof e){var s;for(s in e)"html"===s?i.innerHTML=e[s]:i.setAttribute(s,e[s])}return i},p=function(t,e){if(t instanceof NodeList)h(t,function(t,a){p(a,e)});else if(e)for(;t.hasChildNodes();)t.removeChild(t.firstChild);else t.innerHTML=""},u=function(t,e,a){return c("li",{class:t,html:'<a href="#" data-page="'+e+'">'+a+"</a>"})},f={add:function(t,e){t.classList?t.classList.add(e):f.contains(t,e)||(t.className=t.className.trim()+" "+e)},remove:function(t,e){t.classList?t.classList.remove(e):f.contains(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(t,e){if(t)return t.classList?t.classList.contains(e):!!t.className&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},g=function(t,e){var a,i;1===e?(a=0,i=t.length):-1===e&&(a=t.length-1,i=-1);for(var s=!0;s;){s=!1;for(var n=a;n!=i;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){var r=t[n],o=t[n+e],l=r;t[n]=o,t[n+e]=l,s=!0}}return t},b=function(t,e,a,i,s){var n,r=2*(i=i||2),o=e-i,l=e+i,d=[],p=[];e<4-i+r?l=3+r:e>a-(3-i+r)&&(o=a-(2+r));for(var u=1;u<=a;u++)if(1==u||u==a||u>=o&&u<=l){var g=t[u-1];f.remove(g,"active"),d.push(g)}return h(d,function(e,a){var i=a.children[0].getAttribute("data-page");if(n){var r=n.children[0].getAttribute("data-page");if(i-r==2)p.push(t[r]);else if(i-r!=1){var o=c("li",{class:"ellipsis",html:'<a href="#">'+s+"</a>"});p.push(o)}}p.push(a),n=a}),p},v=function(t){var e=!1,a=!1;if((t=t||this.options.data).headings){e=c("thead");var i=c("tr");h(t.headings,function(t,e){var a=c("th",{html:e});i.appendChild(a)}),e.appendChild(i)}t.data&&(a=c("tbody"),h(t.data,function(e,i){if(t.headings&&t.headings.length!==i.length)throw new Error("The number of rows do not match the number of headings.");var s=c("tr");h(i,function(t,e){var a=c("td",{html:e});s.appendChild(a)}),a.appendChild(s)})),e&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(e)),a&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(a))},m=function(t,e){var a=!1;if(e)switch(e){case"ISO_8601":a=moment(t,moment.ISO_8601).format("YYYYMMDD");break;case"RFC_2822":a=moment(t,"ddd, MM MMM YYYY HH:mm:ss ZZ").format("YYYYMMDD");break;case"MYSQL":a=moment(t,"YYYY-MM-DD hh:mm:ss").format("YYYYMMDD");break;case"UNIX":a=moment(t).unix();break;default:a=moment(t,e).format("YYYYMMDD")}return a},x=function(t){return this.dt=t,this};x.prototype.swap=function(t){if(t.length&&2===t.length){var e=[];h(this.dt.headings,function(t,a){e.push(t)},this);var a=t[0],i=t[1],s=e[i];e[i]=e[a],e[a]=s,this.order(e)}},x.prototype.order=function(t){var e,a,i,s,n,r,o=[],l=[],d=[],c=[];h(t,function(t,i){n=this.dt.headings[i],r="false"!==n.getAttribute("data-sortable"),(e=n.cloneNode(!0)).originalCellIndex=t,e.sortable=r,o.push(e),this.dt.hiddenColumns.indexOf(i)<0&&((a=n.cloneNode(!0)).originalCellIndex=t,a.sortable=r,l.push(a))},this),h(this.dt.data,function(e,a){i=a.cloneNode(),s=a.cloneNode(),i.dataIndex=e,s.dataIndex=e,null!==a.searchIndex&&void 0!==a.searchIndex&&(i.searchIndex=a.searchIndex,s.searchIndex=a.searchIndex),h(t,function(t,e){i.appendChild(a.cells[e].cloneNode(!0)),this.dt.hiddenColumns.indexOf(e)<0&&s.appendChild(a.cells[e].cloneNode(!0))},this),d.push(i),c.push(s)},this),this.dt.headings=o,this.dt.activeHeadings=l,this.dt.data=d,this.dt.activeRows=c,this.dt.update()},x.prototype.hide=function(t){t.length&&(h(t,function(t,e){this.dt.hiddenColumns.indexOf(e)<0&&this.dt.hiddenColumns.push(e)},this),this.rebuild())},x.prototype.show=function(t){if(t.length){var e;h(t,function(t,a){(e=this.dt.hiddenColumns.indexOf(a))>-1&&this.dt.hiddenColumns.splice(e,1)},this),this.rebuild()}},x.prototype.visible=function(t){var e;return t=t||this.dt.headings.map(function(t){return t.originalCellIndex}),isNaN(t)?r(t)&&(e=[],h(t,function(t,a){e.push(this.dt.hiddenColumns.indexOf(a)<0)},this)):e=this.dt.hiddenColumns.indexOf(t)<0,e},x.prototype.hidden=function(t){var e;return t=t||this.dt.headings.map(function(t){return t.originalCellIndex}),isNaN(t)?r(t)&&(e=[],h(t,function(t,a){e.push(this.dt.hiddenColumns.indexOf(a)>-1)},this)):e=this.dt.hiddenColumns.indexOf(this.columns)>-1,e},x.prototype.add=function(t){var e,a=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[t.heading],data:t.data.map(function(t){return[t]})}),void this.rebuild();t.heading.nodeName?a.appendChild(t.heading):a.innerHTML=t.heading,this.dt.headings.push(a),h(this.dt.data,function(a,i){t.data[a]&&(e=document.createElement("td"),t.data[a].nodeName?e.appendChild(t.data[a]):e.innerHTML=t.data[a],i.appendChild(e))}),t.type&&a.setAttribute("data-type",t.type),t.format&&a.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&(a.sortable=t.sortable,a.setAttribute("data-sortable",!0===t.sortable?"true":"false")),this.rebuild()},x.prototype.remove=function(t){r(t)?(t.sort(function(t,e){return e-t}),h(t,function(t,e){this.remove(e)},this)):(this.dt.headings.splice(t,1),h(this.dt.data,function(e,a){a.removeChild(a.cells[t])})),this.rebuild()},x.prototype.sort=function(t,a){var i=this.dt;if(t<1||t>i.activeHeadings.length)return!1;i.sorting=!0,t-=1;var s,n=i.data,r=[],o=[],l=0,d=0,c=i.activeHeadings[t];t=c.originalCellIndex,h(n,function(a,i){var s=i.cells[t].textContent,n=s.replace(/(\$|\,|\s|%)/g,"");if("date"===c.getAttribute("data-type")&&e.moment){var h=!1;c.hasAttribute("data-format")&&(h=c.getAttribute("data-format")),n=m(s,h)}parseFloat(n)==n?o[d++]={value:Number(n),row:i}:r[l++]={value:s,row:i}});var p,u;f.contains(c,"asc")||"asc"==a?(p=g(r,-1),u=g(o,-1),s="descending",f.remove(c,"asc"),f.add(c,"desc")):(p=g(o,1),u=g(r,1),s="ascending",f.remove(c,"desc"),f.add(c,"asc")),i.lastTh&&c!=i.lastTh&&(f.remove(i.lastTh,"desc"),f.remove(i.lastTh,"asc")),i.lastTh=c,n=p.concat(u),i.data=[];var b=[];h(n,function(t,e){i.data.push(e.row),null!==e.row.searchIndex&&void 0!==e.row.searchIndex&&b.push(t)},i),i.searchData=b,this.rebuild(),i.update(),i.emit("datatable.sort",t,s)},x.prototype.rebuild=function(){var t,e,a=[];this.dt.activeRows=[],this.dt.activeHeadings=[],h(this.dt.headings,function(t,e){e.originalCellIndex=t,e.sortable="false"!==e.getAttribute("data-sortable"),this.dt.hiddenColumns.indexOf(t)<0&&this.dt.activeHeadings.push(e)},this),h(this.dt.data,function(i,s){t=s.cloneNode(),e=s.cloneNode(),t.dataIndex=i,e.dataIndex=i,null!==s.searchIndex&&void 0!==s.searchIndex&&(t.searchIndex=s.searchIndex,e.searchIndex=s.searchIndex),h(s.cells,function(a,i){t.appendChild(i.cloneNode(!0)),this.dt.hiddenColumns.indexOf(i.cellIndex)<0&&e.appendChild(i.cloneNode(!0))},this),a.push(t),this.dt.activeRows.push(e)},this),this.dt.data=a,this.dt.renderHeader(),this.dt.update()};var C=function(t,e){return this.dt=t,this.rows=e,this};C.prototype.build=function(t){var e,a=c("tr");return h(this.dt.headings,function(i,s){e=c("td"),t[i]&&t[i].length&&(e.innerHTML=t[i]),a.appendChild(e)},this),a},C.prototype.add=function(t){r(t)&&(r(t[0])?h(t,function(t,e){this.dt.data.push(this.build(e))},this):this.dt.data.push(this.build(t))),this.update(),this.dt.columns().rebuild()},C.prototype.remove=function(t){r(t)?(t.sort(function(t,e){return e-t}),h(t,function(t,e){this.dt.data.splice(e,1)},this)):this.dt.data.splice(t,1),this.update(),this.dt.columns().rebuild()},C.prototype.update=function(){h(this.dt.data,function(t,e){e.dataIndex=t})};var w=function(t,e){if(this.initialized=!1,this.options=l(s,e),"string"==typeof t){var a=t;if(!(t=document.querySelector(t)))throw new Error("The element '"+a+"' can not be found.")}if("table"!==t.tagName.toLowerCase())throw new Error("The selected element is not a table.");if(this.initialLayout=t.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===t.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),t.tBodies.length&&!t.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=t,this.init()},y=w.prototype;return w.extend=function(t,e){"function"==typeof e?w.prototype[t]=e:w[t]=e},y.init=function(t){if(this.initialized||f.contains(this.table,"dataTable-table"))return!1;var e=this;this.options=l(this.options,t||{}),this.isIE=!!/(msie|trident)/i.test(navigator.userAgent),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.render(),this.options.plugins&&h(this.options.plugins,function(t,e){this[t](e)},this),setTimeout(function(){e.emit("datatable.init"),e.initialized=!0},10)},y.render=function(t){if(t){switch(t){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}var e=this,a=e.options,i="";if(a.data&&v.call(e),a.ajax){var s=a.ajax,n=new XMLHttpRequest;d(n,"progress",function(t){e.emit("datatable.ajax.progress",t,n)}),d(n,"load",function(t){if(4===n.readyState)if(e.emit("datatable.ajax.loaded",t,n),200===n.status){var a=s.load?s.load.call(e,n):n.responseText,i=!!o(a)&&"json";e.import({type:i,data:a}),e.setColumns(),e.emit("datatable.ajax.success",t,n)}else e.emit("datatable.ajax.error",t,n)}),d(n,"error",function(t){e.emit("datatable.ajax.error",t,n)}),d(n,"abort",function(t){e.emit("datatable.ajax.abort",t,n)}),e.emit("datatable.ajax.loading",n),n.open("GET","string"==typeof s?a.ajax:a.ajax.url),n.send()}if(e.body=e.table.tBodies[0],e.head=e.table.tHead,e.foot=e.table.tFoot,e.body||(e.body=c("tbody"),e.table.appendChild(e.body)),e.hasRows=e.body.rows.length>0,!e.head){var r=c("thead"),l=c("tr");e.hasRows&&(h(e.body.rows[0].cells,function(t,e){l.appendChild(c("th"))}),r.appendChild(l)),e.head=r,e.table.insertBefore(e.head,e.body)}if(e.headings=[],e.hasHeadings=e.head.rows.length>0,e.hasHeadings&&(e.header=e.head.rows[0],e.headings=[].slice.call(e.header.cells)),a.header||e.head&&e.table.removeChild(e.table.tHead),a.footer?e.head&&!e.foot&&(e.foot=c("tfoot",{html:e.head.innerHTML}),e.table.appendChild(e.foot)):e.foot&&e.table.removeChild(e.table.tFoot),e.wrapper=c("div",{class:"dataTable-wrapper dataTable-loading"}),i+="<div class='dataTable-top'>",i+=a.layout.top,i+="</div>",i+="<div class='dataTable-container'></div>",i+="<div class='dataTable-bottom'>",i+=a.layout.bottom,i+="</div>",i=i.replace("{info}","<div class='dataTable-info'></div>"),a.perPageSelect){var p="<div class='dataTable-dropdown'><label>";p+=a.labels.perPage,p+="</label></div>";var u=c("select",{class:"dataTable-selector"});h(a.perPageSelect,function(t,e){var i=e===a.perPage,s=new Option(e,e,i,i);u.add(s)}),p=p.replace("{select}",u.outerHTML),i=i.replace("{select}",p)}else i=i.replace("{select}","");if(a.searchable){var g="<div class='dataTable-search'><input class='dataTable-input' placeholder='"+a.labels.placeholder+"' type='text'></div>";i=i.replace("{search}",g)}else i=i.replace("{search}","");e.hasHeadings&&this.render("header"),f.add(e.table,"dataTable-table");var b=c("div",{class:"dataTable-pagination"}),m=c("ul");b.appendChild(m),i=i.replace(/\{pager\}/g,b.outerHTML),e.wrapper.innerHTML=i,e.container=e.wrapper.querySelector(".dataTable-container"),e.pagers=e.wrapper.querySelectorAll(".dataTable-pagination"),e.label=e.wrapper.querySelector(".dataTable-info"),e.table.parentNode.replaceChild(e.wrapper,e.table),e.container.appendChild(e.table),e.rect=e.table.getBoundingClientRect(),e.data=[].slice.call(e.body.rows),e.activeRows=e.data.slice(),e.activeHeadings=e.headings.slice(),e.update(),a.ajax||e.setColumns(),a.fixedHeight&&this.fixHeight(),e.fixColumns(),a.header||f.add(e.wrapper,"no-header"),a.footer||f.add(e.wrapper,"no-footer"),a.sortable&&f.add(e.wrapper,"sortable"),a.searchable&&f.add(e.wrapper,"searchable"),a.fixedHeight&&f.add(e.wrapper,"fixed-height"),a.fixedColumns&&f.add(e.wrapper,"fixed-columns"),e.bindEvents()},y.renderPage=function(){if(this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);var t=this.currentPage-1,e=a.createDocumentFragment();p(this.header,this.isIE),h(this.activeHeadings,function(t,e){this.header.appendChild(e)},this),h(this.pages[t],function(t,a){e.appendChild(a)},this),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.clear();var i,s=0,n=0,r=0;if(this.totalPages&&(r=(n=(s=this.currentPage-1)*this.options.perPage)+this.pages[s].length,n+=1,i=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){var o=this.options.labels.info.replace("{start}",n).replace("{end}",r).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",i);this.label.innerHTML=i?o:""}this.options.fixedHeight&&1==this.currentPage&&this.fixHeight()},y.renderPager=function(){if(p(this.pagers,this.isIE),this.totalPages>1){var t="pager",e=a.createDocumentFragment(),i=this.onFirstPage?1:this.currentPage-1,s=this.onlastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(u(t,1,this.options.firstText)),this.options.nextPrev&&e.appendChild(u(t,i,this.options.prevText));var n=this.links;this.options.truncatePager&&(n=b(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),f.add(this.links[this.currentPage-1],"active"),h(n,function(t,a){f.remove(a,"active"),e.appendChild(a)}),f.add(this.links[this.currentPage-1],"active"),this.options.nextPrev&&e.appendChild(u(t,s,this.options.nextText)),this.options.firstLast&&e.appendChild(u(t,this.totalPages,this.options.lastText)),h(this.pagers,function(t,a){a.appendChild(e.cloneNode(!0))})}},y.renderHeader=function(){var t=this;t.labels=[],t.headings&&t.headings.length&&h(t.headings,function(e,a){if(t.labels[e]=a.textContent,f.contains(a.firstElementChild,"dataTable-sorter")&&(a.innerHTML=a.firstElementChild.innerHTML),a.sortable="false"!==a.getAttribute("data-sortable"),a.originalCellIndex=e,t.options.sortable&&a.sortable){var i=c("a",{href:"#",class:"dataTable-sorter",html:a.innerHTML});a.innerHTML="",a.setAttribute("data-sortable",""),a.appendChild(i)}}),t.fixColumns()},y.bindEvents=function(){var t=this,e=t.options;if(e.perPageSelect){var a=t.wrapper.querySelector(".dataTable-selector");a&&d(a,"change",function(a){e.perPage=parseInt(this.value,10),t.update(),e.fixedHeight&&this.fixHeight(),t.emit("datatable.perpage")})}e.searchable&&(t.input=t.wrapper.querySelector(".dataTable-input"),t.input&&d(t.input,"keyup",function(e){t.search(this.value)})),d(t.wrapper,"click",function(a){var i=a.target;"a"===i.nodeName.toLowerCase()&&(i.hasAttribute("data-page")?(t.page(i.getAttribute("data-page")),a.preventDefault()):e.sortable&&f.contains(i,"dataTable-sorter")&&"false"!=i.parentNode.getAttribute("data-sortable")&&(t.columns().sort(t.activeHeadings.indexOf(i.parentNode)+1),a.preventDefault()))})},y.setColumns=function(){this.options.columns&&this.headings.length&&h(this.options.columns,function(t,e){e.select&&(r(e.select)||(e.select=[e.select]),h(e.select,function(t,a){var i=this.headings[a];e.type&&i.setAttribute("data-type",e.type),e.format&&i.setAttribute("data-format",e.format),e.hasOwnProperty("sortable")&&i.setAttribute("data-sortable",e.sortable),e.hasOwnProperty("hidden")&&!1!==e.hidden&&this.columns(a).hide(),e.hasOwnProperty("sort")&&1===e.select.length&&this.columns().sort(e.select[0]+1,e.sort)},this))},this),this.render("header")},y.destroy=function(){this.table.innerHTML=this.initialLayout,f.remove(this.table,"dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1},y.update=function(){this.paginate(this),this.render("page"),this.links=[];for(var t=this.pages.length;t--;){var e=t+1;this.links[t]=u(0===t?"active":"",e,e)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")},y.paginate=function(){var t=this.options.perPage,e=this.activeRows;return this.searching&&(e=[],h(this.searchData,function(t,a){e.push(this.activeRows[a])},this)),this.pages=e.map(function(a,i){return i%t==0?e.slice(i,i+t):null}).filter(function(t){return t}),this.totalPages=this.lastPage=this.pages.length,this.totalPages},y.fixColumns=function(){if(this.options.fixedColumns&&this.activeHeadings&&this.activeHeadings.length){var t,e=!1;if(this.columnWidths=[],this.table.tHead)h(this.activeHeadings,function(t,e){e.style.width=""},this),h(this.activeHeadings,function(t,e){var a=e.offsetWidth,i=a/this.rect.width*100;e.style.width=i+"%",this.columnWidths[t]=a},this);else{t=[],e=c("thead");var a=c("tr"),i=this.table.tBodies[0].rows[0].cells;h(i,function(e,i){var s=c("th");a.appendChild(s),t.push(s)}),e.appendChild(a),this.table.insertBefore(e,this.body);var s=[];h(t,function(t,e){var a=e.offsetWidth,i=a/this.rect.width*100;s.push(i),this.columnWidths[t]=a},this),h(this.data,function(t,e){h(e.cells,function(t,e){this.columns(e.cellIndex).visible()&&(e.style.width=s[t]+"%")},this)},this),this.table.removeChild(e)}}},y.fixHeight=function(){this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px"},y.search=function(t){if(!this.hasRows)return!1;var e=this;if(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],!t.length)return this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),f.remove(this.wrapper,"search-results"),!1;this.clear(),h(this.data,function(a,i){var s=this.searchData.indexOf(i)>-1;t.split(" ").reduce(function(t,a){for(var s=!1,n=0;n<i.cells.length;n++)if(i.cells[n].textContent.toLowerCase().indexOf(a)>-1&&e.columns(i.cells[n].cellIndex).visible()){s=!0;break}return t&&s},!0)&&!s?(i.searchIndex=a,this.searchData.push(a)):i.searchIndex=null},this),f.add(this.wrapper,"search-results"),this.searchData.length||(f.remove(this.wrapper,"search-results"),this.setMessage(this.options.labels.noRows)),this.update(),this.emit("datatable.search",t,this.searchData)},y.page=function(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",t)))},y.sortColumn=function(t,e){this.columns().sort(t,e)},y.insert=function(t){var e=this,a=[];if(n(t)){if(t.headings&&!e.hasHeadings&&!e.hasRows){var i,s=c("tr");h(t.headings,function(t,e){i=c("th",{html:e}),s.appendChild(i)}),e.head.appendChild(s),e.header=s,e.headings=[].slice.call(s.cells),e.hasHeadings=!0,e.options.sortable=e.initialSortable,e.render("header")}t.data&&r(t.data)&&(a=t.data)}else r(t)&&h(t,function(t,i){var s=[];h(i,function(t,a){var i=e.labels.indexOf(t);i>-1&&(s[i]=a)}),a.push(s)});a.length&&(e.rows().add(a),e.hasRows=!0),e.update(),e.fixColumns()},y.refresh=function(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")},y.clear=function(t){this.body&&p(this.body,this.isIE);var e=this.body;this.body||(e=this.table),t&&("string"==typeof t?e.innerHTML=t:e.appendChild(t))},y.export=function(t){if(!this.hasHeadings&&!this.hasRows)return!1;var e,a,s,o,h=this.activeHeadings,d=[],c=[],p={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4};if(!n(t))return!1;var u=l(p,t);if(u.type){if("txt"!==u.type&&"csv"!==u.type||(d[0]=this.header),u.selection)if(isNaN(u.selection)){if(r(u.selection))for(e=0;e<u.selection.length;e++)d=d.concat(this.pages[u.selection[e]-1])}else d=d.concat(this.pages[u.selection-1]);else d=d.concat(this.activeRows);if(d.length){if("txt"===u.type||"csv"===u.type){for(s="",e=0;e<d.length;e++){for(a=0;a<d[e].cells.length;a++)u.skipColumn.indexOf(h[a].originalCellIndex)<0&&this.columns(h[a].originalCellIndex).visible()&&(s+=d[e].cells[a].textContent+u.columnDelimiter);s=s.trim().substring(0,s.length-1),s+=u.lineDelimiter}s=s.trim().substring(0,s.length-1),u.download&&(s="data:text/csv;charset=utf-8,"+s)}else if("sql"===u.type){for(s="INSERT INTO `"+u.tableName+"` (",e=0;e<h.length;e++)u.skipColumn.indexOf(h[e].originalCellIndex)<0&&this.columns(h[e].originalCellIndex).visible()&&(s+="`"+h[e].textContent+"`,");for(s=s.trim().substring(0,s.length-1),s+=") VALUES ",e=0;e<d.length;e++){for(s+="(",a=0;a<d[e].cells.length;a++)u.skipColumn.indexOf(h[a].originalCellIndex)<0&&this.columns(h[a].originalCellIndex).visible()&&(s+='"'+d[e].cells[a].textContent+'",');s=s.trim().substring(0,s.length-1),s+="),"}s=s.trim().substring(0,s.length-1),s+=";",u.download&&(s="data:application/sql;charset=utf-8,"+s)}else if("json"===u.type){for(a=0;a<d.length;a++)for(c[a]=c[a]||{},e=0;e<h.length;e++)u.skipColumn.indexOf(h[e].originalCellIndex)<0&&this.columns(h[e].originalCellIndex).visible()&&(c[a][h[e].textContent]=d[a].cells[e].textContent);s=JSON.stringify(c,u.replacer,u.space),u.download&&(s="data:application/json;charset=utf-8,"+s)}return u.download&&(u.filename=u.filename||"datatable_export",u.filename+="."+u.type,s=encodeURI(s),(o=document.createElement("a")).href=s,o.download=u.filename,i.appendChild(o),o.click(),i.removeChild(o)),s}}return!1},y.import=function(t){var e=!1,a={lineDelimiter:"\n",columnDelimiter:","};if(!n(t))return!1;if((t=l(a,t)).data.length||n(t.data)){if("csv"===t.type){e={data:[]};var i=t.data.split(t.lineDelimiter);i.length&&h(this.headings,function(a,s){e.data[a]=[];var n=i[a].split(t.columnDelimiter);n.length&&h(n,function(t,i){e.data[a].push(i)})})}else if("json"===t.type){var s=o(t.data);s?(e={headings:[],data:[]},h(s,function(t,a){e.data[t]=[],h(a,function(a,i){e.headings.indexOf(a)<0&&e.headings.push(a),e.data[t].push(i)})})):console.warn("That's not valid JSON!")}n(t.data)&&(e=t.data),e&&this.insert(e)}return!1},y.print=function(){var t=this.activeHeadings,a=this.activeRows,i=c("table"),s=c("thead"),n=c("tbody"),r=c("tr");h(t,function(t,e){r.appendChild(c("th",{html:e.textContent}))}),s.appendChild(r),h(a,function(t,e){var a=c("tr");h(e.cells,function(t,e){a.appendChild(c("td",{html:e.textContent}))}),n.appendChild(a)}),i.appendChild(s),i.appendChild(n);var o=e.open();o.document.body.appendChild(i),o.print()},y.setMessage=function(t){var e=1;this.hasRows&&(e=this.data[0].cells.length),this.clear(c("tr",{html:'<td class="dataTables-empty" colspan="'+e+'">'+t+"</td>"}))},y.columns=function(t){return new x(this,t)},y.rows=function(t){return new C(this,t)},y.on=function(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)},y.off=function(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)},y.emit=function(t){if(this.events=this.events||{},t in this.events!=!1)for(var e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))},w});