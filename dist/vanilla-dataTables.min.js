/*!
 *
 * Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (http://mobius.ovh)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 1.4.9
 *
 */
!function(e,t){var a="DataTable";"function"==typeof define&&define.amd?define([],t(a)):"object"==typeof exports?module.exports=t(a):e[a]=t(a)}(this,function(e){"use strict";var t=window,a=document,i=a.body,n={perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},s=function(e){return"[object Object]"===Object.prototype.toString.call(e)},r=function(e){return Array.isArray(e)},o=function(e){var t=!1;try{t=JSON.parse(e)}catch(e){return!1}return!(null===t||!r(t)&&!s(t))&&t},d=function(e,t){for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];i&&s(i)?(e[a]=e[a]||{},d(e[a],i)):e[a]=i}return e},h=function(e,t,a){var i;if(s(e))for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(a,e[i],i);else for(i=0,l=e.length;i<l;i++)t.call(a,e[i],i)},c=function(e,t,a){e.addEventListener(t,a,!1)},p=function(e,t){var i=a.createElement(e);if(t&&"object"==typeof t){var n;for(n in t)"html"===n?i.innerHTML=t[n]:i.setAttribute(n,t[n])}return i},u=function(e,t){if(e instanceof NodeList)h(e,function(e){u(e,t)});else if(t)for(;e.hasChildNodes();)e.removeChild(e.firstChild);else e.innerHTML=""},f=function(e,t,a){return p("li",{class:e,html:'<a href="#" data-page="'+t+'">'+a+"</a>"})},g={add:function(e,t){e.classList?e.classList.add(t):g.contains(e,t)||(e.className=e.className.trim()+" "+t)},remove:function(e,t){e.classList?e.classList.remove(t):g.contains(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(e,t){if(e)return e.classList?e.classList.contains(t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},b=function(e,t){var a,i;1===t?(a=0,i=e.length):-1===t&&(a=e.length-1,i=-1);for(var n=!0;n;){n=!1;for(var s=a;s!=i;s+=t)if(e[s+t]&&e[s].value>e[s+t].value){var r=e[s],o=e[s+t],l=r;e[s]=o,e[s+t]=l,n=!0}}return e},m=function(e,t,a,i,n){var s,r=2*(i=i||2),o=t-i,l=t+i,d=[],c=[];t<4-i+r?l=3+r:t>a-(3-i+r)&&(o=a-(2+r));for(var u=1;u<=a;u++)if(1==u||u==a||u>=o&&u<=l){var f=e[u-1];g.remove(f,"active"),d.push(f)}return h(d,function(t){var a=t.children[0].getAttribute("data-page");if(s){var i=s.children[0].getAttribute("data-page");if(a-i==2)c.push(e[i]);else if(a-i!=1){var r=p("li",{class:"ellipsis",html:'<a href="#">'+n+"</a>"});c.push(r)}}c.push(t),s=t}),c},v=function(e){var t=!1,a=!1;if((e=e||this.options.data).headings){t=p("thead");var i=p("tr");h(e.headings,function(e){var t=p("th",{html:e});i.appendChild(t)}),t.appendChild(i)}e.data&&(a=p("tbody"),h(e.data,function(t){if(e.headings&&e.headings.length!==t.length)throw new Error("The number of rows do not match the number of headings.");var i=p("tr");h(t,function(e){var t=p("td",{html:e});i.appendChild(t)}),a.appendChild(i)})),t&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(t)),a&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(a))},x=function(e,t){var a=!1;if(t)switch(t){case"ISO_8601":a=moment(e,moment.ISO_8601).format("YYYYMMDD");break;case"RFC_2822":a=moment(e,"ddd, MM MMM YYYY HH:mm:ss ZZ").format("YYYYMMDD");break;case"MYSQL":a=moment(e,"YYYY-MM-DD hh:mm:ss").format("YYYYMMDD");break;case"UNIX":a=moment(e).unix();break;default:a=moment(e,t).format("YYYYMMDD")}return a},C=function(e){return this.dt=e,this};C.prototype.swap=function(e){if(e.length&&2===e.length){var t=[];h(this.dt.headings,function(e,a){t.push(a)});var a=e[0],i=e[1],n=t[i];t[i]=t[a],t[a]=n,this.order(t)}},C.prototype.order=function(e){var t,a,i,n,s,r,o=[],l=[],d=[],c=[],p=this.dt;h(e,function(e,i){s=p.headings[e],r="false"!==s.getAttribute("data-sortable"),(t=s.cloneNode(!0)).originalCellIndex=i,t.sortable=r,o.push(t),p.hiddenColumns.indexOf(e)<0&&((a=s.cloneNode(!0)).originalCellIndex=i,a.sortable=r,l.push(a))}),h(p.data,function(t,a){i=t.cloneNode(),n=t.cloneNode(),i.dataIndex=a,n.dataIndex=a,null!==t.searchIndex&&void 0!==t.searchIndex&&(i.searchIndex=t.searchIndex,n.searchIndex=t.searchIndex),h(e,function(e,a){i.appendChild(t.cells[a].cloneNode(!0)),p.hiddenColumns.indexOf(a)<0&&n.appendChild(t.cells[a].cloneNode(!0))},this),d.push(i),c.push(n)}),p.headings=o,p.activeHeadings=l,p.data=d,p.activeRows=c,p.update()},C.prototype.hide=function(e){if(e.length){var t=this.dt;h(e,function(e){t.hiddenColumns.indexOf(e)<0&&t.hiddenColumns.push(e)}),this.rebuild()}},C.prototype.show=function(e){if(e.length){var t,a=this.dt;h(e,function(e){(t=a.hiddenColumns.indexOf(e))>-1&&a.hiddenColumns.splice(t,1)}),this.rebuild()}},C.prototype.visible=function(e){var t,a=this.dt;return e=e||a.headings.map(function(e){return e.originalCellIndex}),isNaN(e)?r(e)&&(t=[],h(e,function(e){t.push(a.hiddenColumns.indexOf(e)<0)})):t=a.hiddenColumns.indexOf(e)<0,t},C.prototype.hidden=function(e){var t,a=this.dt;return e=e||this.dt.headings.map(function(e){return e.originalCellIndex}),isNaN(e)?r(e)&&(t=[],h(e,function(e){t.push(a.hiddenColumns.indexOf(e)>-1)})):t=a.hiddenColumns.indexOf(this.columns)>-1,t},C.prototype.add=function(e){var t,a=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[e.heading],data:e.data.map(function(e){return[e]})}),void this.rebuild();e.heading.nodeName?a.appendChild(e.heading):a.innerHTML=e.heading,this.dt.headings.push(a),h(this.dt.data,function(a,i){e.data[i]&&(t=document.createElement("td"),e.data[i].nodeName?t.appendChild(e.data[i]):t.innerHTML=e.data[i],a.appendChild(t))}),e.type&&a.setAttribute("data-type",e.type),e.format&&a.setAttribute("data-format",e.format),e.hasOwnProperty("sortable")&&(a.sortable=e.sortable,a.setAttribute("data-sortable",!0===e.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()},C.prototype.remove=function(e){r(e)?(e.sort(function(e,t){return t-e}),h(e,function(e){this.remove(e)},this)):(this.dt.headings.splice(e,1),h(this.dt.data,function(t){t.removeChild(t.cells[e])})),this.rebuild()},C.prototype.sort=function(e,a){var i=this.dt;if(e<1||e>i.activeHeadings.length)return!1;i.sorting=!0,e-=1;var n,s=i.data,r=[],o=[],l=0,d=0,c=i.activeHeadings[e];e=c.originalCellIndex,h(s,function(a){var i=a.cells[e].textContent,n=i.replace(/(\$|\,|\s|%)/g,"");if("date"===c.getAttribute("data-type")&&t.moment){var s=!1;c.hasAttribute("data-format")&&(s=c.getAttribute("data-format")),n=x(i,s)}parseFloat(n)==n?o[d++]={value:Number(n),row:a}:r[l++]={value:i,row:a}});var p,u;g.contains(c,"asc")||"asc"==a?(p=b(r,-1),u=b(o,-1),n="descending",g.remove(c,"asc"),g.add(c,"desc")):(p=b(o,1),u=b(r,1),n="ascending",g.remove(c,"desc"),g.add(c,"asc")),i.lastTh&&c!=i.lastTh&&(g.remove(i.lastTh,"desc"),g.remove(i.lastTh,"asc")),i.lastTh=c,s=p.concat(u),i.data=[];var f=[];h(s,function(e,t){i.data.push(e.row),null!==e.row.searchIndex&&void 0!==e.row.searchIndex&&f.push(t)},i),i.searchData=f,this.rebuild(),i.update(),i.emit("datatable.sort",e,n)},C.prototype.rebuild=function(){var e,t,a,i,n=this.dt,s=[];n.activeRows=[],n.activeHeadings=[],h(n.headings,function(e,t){e.originalCellIndex=t,e.sortable="false"!==e.getAttribute("data-sortable"),n.hiddenColumns.indexOf(t)<0&&n.activeHeadings.push(e)},this),h(n.data,function(r,o){e=r.cloneNode(),t=r.cloneNode(),e.dataIndex=o,t.dataIndex=o,null!==r.searchIndex&&void 0!==r.searchIndex&&(e.searchIndex=r.searchIndex,t.searchIndex=r.searchIndex),h(r.cells,function(s){(a=s.cloneNode(!0)).data=s.data,e.appendChild(a),n.hiddenColumns.indexOf(s.cellIndex)<0&&((i=s.cloneNode(!0)).data=s.data,t.appendChild(i))}),s.push(e),n.activeRows.push(t)}),n.data=s,n.update()};var w=function(e,t){return this.dt=e,this.rows=t,this};w.prototype.build=function(e){var t,a=p("tr");return h(this.dt.headings,function(i,n){t=p("td"),e[n]&&e[n].length&&(t.innerHTML=e[n]),a.appendChild(t)}),a},w.prototype.render=function(e){return e},w.prototype.add=function(e){if(r(e)){var t=this.dt;r(e[0])?h(e,function(e,a){t.data.push(this.build(e))},this):t.data.push(this.build(e)),this.update(),t.columns().rebuild()}},w.prototype.remove=function(e){var t=this.dt;r(e)?(e.sort(function(e,t){return t-e}),h(e,function(e,a){t.data.splice(e,1)})):t.data.splice(e,1),this.update(),t.columns().rebuild()},w.prototype.update=function(){h(this.dt.data,function(e,t){e.dataIndex=t})};var y=function(e,t){if(this.initialized=!1,this.options=d(n,t),"string"==typeof e){var a=e;if(!(e=document.querySelector(e)))throw new Error("The element '"+a+"' can not be found.")}if("table"!==e.tagName.toLowerCase())throw new Error("The selected element is not a table.");if(this.initialLayout=e.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===e.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),e.tBodies.length&&!e.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=e,this.init()},T=y.prototype;return y.extend=function(e,t){"function"==typeof t?y.prototype[e]=t:y[e]=t},T.init=function(e){if(this.initialized||g.contains(this.table,"dataTable-table"))return!1;var t=this;this.options=d(this.options,e||{}),this.isIE=!!/(msie|trident)/i.test(navigator.userAgent),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),this.options.plugins&&h(this.options.plugins,function(e,t){this[t](e)},this),setTimeout(function(){t.emit("datatable.init"),t.initialized=!0},10)},T.render=function(e){if(e){switch(e){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}var t=this,a=t.options,i="";if(a.data&&v.call(t),a.ajax){var n=a.ajax,s=new XMLHttpRequest;c(s,"progress",function(e){t.emit("datatable.ajax.progress",e,s)}),c(s,"load",function(e){if(4===s.readyState)if(t.emit("datatable.ajax.loaded",e,s),200===s.status){var a=n.load?n.load.call(t,s):s.responseText,i=!!o(a)&&"json";t.import({type:i,data:a}),t.setColumns(),t.emit("datatable.ajax.success",e,s)}else t.emit("datatable.ajax.error",e,s)}),c(s,"error",function(e){t.emit("datatable.ajax.error",e,s)}),c(s,"abort",function(e){t.emit("datatable.ajax.abort",e,s)}),t.emit("datatable.ajax.loading",s),s.open("GET","string"==typeof n?a.ajax:a.ajax.url),s.send()}if(t.body=t.table.tBodies[0],t.head=t.table.tHead,t.foot=t.table.tFoot,t.body||(t.body=p("tbody"),t.table.appendChild(t.body)),t.hasRows=t.body.rows.length>0,!t.head){var r=p("thead"),l=p("tr");t.hasRows&&(h(t.body.rows[0].cells,function(){l.appendChild(p("th"))}),r.appendChild(l)),t.head=r,t.table.insertBefore(t.head,t.body)}if(t.headings=[],t.hasHeadings=t.head.rows.length>0,t.hasHeadings&&(t.header=t.head.rows[0],t.headings=[].slice.call(t.header.cells)),a.header||t.head&&t.table.removeChild(t.table.tHead),a.footer?t.head&&!t.foot&&(t.foot=p("tfoot",{html:t.head.innerHTML}),t.table.appendChild(t.foot)):t.foot&&t.table.removeChild(t.table.tFoot),t.wrapper=p("div",{class:"dataTable-wrapper dataTable-loading"}),i+="<div class='dataTable-top'>",i+=a.layout.top,i+="</div>",i+="<div class='dataTable-container'></div>",i+="<div class='dataTable-bottom'>",i+=a.layout.bottom,i+="</div>",i=i.replace("{info}","<div class='dataTable-info'></div>"),a.perPageSelect){var d="<div class='dataTable-dropdown'><label>";d+=a.labels.perPage,d+="</label></div>";var u=p("select",{class:"dataTable-selector"});h(a.perPageSelect,function(e){var t=e===a.perPage,i=new Option(e,e,t,t);u.add(i)}),d=d.replace("{select}",u.outerHTML),i=i.replace("{select}",d)}else i=i.replace("{select}","");if(a.searchable){var f="<div class='dataTable-search'><input class='dataTable-input' placeholder='"+a.labels.placeholder+"' type='text'></div>";i=i.replace("{search}",f)}else i=i.replace("{search}","");t.hasHeadings&&this.render("header"),g.add(t.table,"dataTable-table");var b=p("div",{class:"dataTable-pagination"}),m=p("ul");b.appendChild(m),i=i.replace(/\{pager\}/g,b.outerHTML),t.wrapper.innerHTML=i,t.container=t.wrapper.querySelector(".dataTable-container"),t.pagers=t.wrapper.querySelectorAll(".dataTable-pagination"),t.label=t.wrapper.querySelector(".dataTable-info"),t.table.parentNode.replaceChild(t.wrapper,t.table),t.container.appendChild(t.table),t.rect=t.table.getBoundingClientRect(),t.data=[].slice.call(t.body.rows),t.activeRows=t.data.slice(),t.activeHeadings=t.headings.slice(),t.update(),a.ajax||t.setColumns(),a.fixedHeight&&this.fixHeight(),t.fixColumns(),a.header||g.add(t.wrapper,"no-header"),a.footer||g.add(t.wrapper,"no-footer"),a.sortable&&g.add(t.wrapper,"sortable"),a.searchable&&g.add(t.wrapper,"searchable"),a.fixedHeight&&g.add(t.wrapper,"fixed-height"),a.fixedColumns&&g.add(t.wrapper,"fixed-columns"),t.bindEvents()},T.renderPage=function(){if(this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);var e=this.currentPage-1,t=a.createDocumentFragment();u(this.header,this.isIE),h(this.activeHeadings,function(e){this.header.appendChild(e)},this),h(this.pages[e],function(e){t.appendChild(this.rows().render(e))},this),this.clear(t),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.clear();var i,n=0,s=0,r=0;if(this.totalPages&&(r=(s=(n=this.currentPage-1)*this.options.perPage)+this.pages[n].length,s+=1,i=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){var o=this.options.labels.info.replace("{start}",s).replace("{end}",r).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",i);this.label.innerHTML=i?o:""}this.options.fixedHeight&&1==this.currentPage&&this.fixHeight()},T.renderPager=function(){if(u(this.pagers,this.isIE),this.totalPages>1){var e="pager",t=a.createDocumentFragment(),i=this.onFirstPage?1:this.currentPage-1,n=this.onlastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&t.appendChild(f(e,1,this.options.firstText)),this.options.nextPrev&&t.appendChild(f(e,i,this.options.prevText));var s=this.links;this.options.truncatePager&&(s=m(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),g.add(this.links[this.currentPage-1],"active"),h(s,function(e){g.remove(e,"active"),t.appendChild(e)}),g.add(this.links[this.currentPage-1],"active"),this.options.nextPrev&&t.appendChild(f(e,n,this.options.nextText)),this.options.firstLast&&t.appendChild(f(e,this.totalPages,this.options.lastText)),h(this.pagers,function(e){e.appendChild(t.cloneNode(!0))})}},T.renderHeader=function(){var e=this;e.labels=[],e.headings&&e.headings.length&&h(e.headings,function(t,a){if(e.labels[a]=t.textContent,g.contains(t.firstElementChild,"dataTable-sorter")&&(t.innerHTML=t.firstElementChild.innerHTML),t.sortable="false"!==t.getAttribute("data-sortable"),t.originalCellIndex=a,e.options.sortable&&t.sortable){var i=p("a",{href:"#",class:"dataTable-sorter",html:t.innerHTML});t.innerHTML="",t.setAttribute("data-sortable",""),t.appendChild(i)}}),e.fixColumns()},T.bindEvents=function(){var e=this,t=e.options;if(t.perPageSelect){var a=e.wrapper.querySelector(".dataTable-selector");a&&c(a,"change",function(a){t.perPage=parseInt(this.value,10),e.update(),t.fixedHeight&&this.fixHeight(),e.emit("datatable.perpage")})}t.searchable&&(e.input=e.wrapper.querySelector(".dataTable-input"),e.input&&c(e.input,"keyup",function(t){e.search(this.value)})),c(e.wrapper,"click",function(a){var i=a.target;"a"===i.nodeName.toLowerCase()&&(i.hasAttribute("data-page")?(e.page(i.getAttribute("data-page")),a.preventDefault()):t.sortable&&g.contains(i,"dataTable-sorter")&&"false"!=i.parentNode.getAttribute("data-sortable")&&(e.columns().sort(e.activeHeadings.indexOf(i.parentNode)+1),a.preventDefault()))})},T.setColumns=function(){var e=this;e.options.columns&&e.headings.length&&h(e.options.columns,function(t){r(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(e.selectedColumns=e.selectedColumns.concat(t.select),e.columnRenderers.push({columns:t.select,renderer:t.render})),h(t.select,function(a){var i=e.headings[a];t.type&&i.setAttribute("data-type",t.type),t.format&&i.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&i.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&e.columns(a).hide(),t.hasOwnProperty("sort")&&1===t.select.length&&e.columns().sort(t.select[0]+1,t.sort)})}),e.hasRows&&(h(e.data,function(e,t){e.dataIndex=t,h(e.cells,function(e){e.data=e.innerHTML})}),e.selectedColumns.length&&h(e.data,function(t){h(t.cells,function(a,i){e.selectedColumns.indexOf(i)>-1&&h(e.columnRenderers,function(n){n.columns.indexOf(i)>-1&&(a.innerHTML=n.renderer.call(e,a.data,a,t))})})}),e.columns().rebuild()),e.render("header")},T.destroy=function(){this.table.innerHTML=this.initialLayout,g.remove(this.table,"dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1},T.update=function(){this.paginate(this),this.render("page"),this.links=[];for(var e=this.pages.length;e--;){var t=e+1;this.links[e]=f(0===e?"active":"",t,t)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")},T.paginate=function(){var e=this.options.perPage,t=this.activeRows;return this.searching&&(t=[],h(this.searchData,function(e){t.push(this.activeRows[e])},this)),this.pages=t.map(function(a,i){return i%e==0?t.slice(i,i+e):null}).filter(function(e){return e}),this.totalPages=this.lastPage=this.pages.length,this.totalPages},T.fixColumns=function(){if(this.options.fixedColumns&&this.activeHeadings&&this.activeHeadings.length){var e,t=!1;if(this.columnWidths=[],this.table.tHead)h(this.activeHeadings,function(e){e.style.width=""},this),h(this.activeHeadings,function(e,t){var a=e.offsetWidth,i=a/this.rect.width*100;e.style.width=i+"%",this.columnWidths[t]=a},this);else{e=[],t=p("thead");var a=p("tr"),i=this.table.tBodies[0].rows[0].cells;h(i,function(){var t=p("th");a.appendChild(t),e.push(t)}),t.appendChild(a),this.table.insertBefore(t,this.body);var n=[];h(e,function(e,t){var a=e.offsetWidth,i=a/this.rect.width*100;n.push(i),this.columnWidths[t]=a},this),h(this.data,function(e){h(e.cells,function(e,t){this.columns(e.cellIndex).visible()&&(e.style.width=n[t]+"%")},this)},this),this.table.removeChild(t)}}},T.fixHeight=function(){this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px"},T.search=function(e){if(!this.hasRows)return!1;var t=this;if(e=e.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],!e.length)return this.searching=!1,this.update(),this.emit("datatable.search",e,this.searchData),g.remove(this.wrapper,"search-results"),!1;this.clear(),h(this.data,function(a,i){var n=this.searchData.indexOf(a)>-1;e.split(" ").reduce(function(e,i){for(var n=!1,s=0;s<a.cells.length;s++)if(a.cells[s].textContent.toLowerCase().indexOf(i)>-1&&t.columns(a.cells[s].cellIndex).visible()){n=!0;break}return e&&n},!0)&&!n?(a.searchIndex=i,this.searchData.push(i)):a.searchIndex=null},this),g.add(this.wrapper,"search-results"),this.searchData.length||(g.remove(this.wrapper,"search-results"),this.setMessage(this.options.labels.noRows)),this.update(),this.emit("datatable.search",e,this.searchData)},T.page=function(e){return e!=this.currentPage&&(isNaN(e)||(this.currentPage=parseInt(e,10)),!(e>this.pages.length||e<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",e)))},T.sortColumn=function(e,t){this.columns().sort(e,t)},T.insert=function(e){var t=this,a=[];if(s(e)){if(e.headings&&!t.hasHeadings&&!t.hasRows){var i,n=p("tr");h(e.headings,function(e){i=p("th",{html:e}),n.appendChild(i)}),t.head.appendChild(n),t.header=n,t.headings=[].slice.call(n.cells),t.hasHeadings=!0,t.options.sortable=t.initialSortable,t.render("header")}e.data&&r(e.data)&&(a=e.data)}else r(e)&&h(e,function(e){var i=[];h(e,function(e,a){var n=t.labels.indexOf(a);n>-1&&(i[n]=e)}),a.push(i)});a.length&&(t.rows().add(a),t.hasRows=!0),t.update(),t.fixColumns()},T.refresh=function(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")},T.clear=function(e){this.body&&u(this.body,this.isIE);var t=this.body;this.body||(t=this.table),e&&("string"==typeof e?t.innerHTML=e:t.appendChild(e))},T.export=function(e){if(!this.hasHeadings&&!this.hasRows)return!1;var t,a,n,o,l=this.activeHeadings,h=[],c=[],p={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4};if(!s(e))return!1;var u=d(p,e);if(u.type){if("txt"!==u.type&&"csv"!==u.type||(h[0]=this.header),u.selection)if(isNaN(u.selection)){if(r(u.selection))for(t=0;t<u.selection.length;t++)h=h.concat(this.pages[u.selection[t]-1])}else h=h.concat(this.pages[u.selection-1]);else h=h.concat(this.activeRows);if(h.length){if("txt"===u.type||"csv"===u.type){for(n="",t=0;t<h.length;t++){for(a=0;a<h[t].cells.length;a++)u.skipColumn.indexOf(l[a].originalCellIndex)<0&&this.columns(l[a].originalCellIndex).visible()&&(n+=h[t].cells[a].textContent+u.columnDelimiter);n=n.trim().substring(0,n.length-1),n+=u.lineDelimiter}n=n.trim().substring(0,n.length-1),u.download&&(n="data:text/csv;charset=utf-8,"+n)}else if("sql"===u.type){for(n="INSERT INTO `"+u.tableName+"` (",t=0;t<l.length;t++)u.skipColumn.indexOf(l[t].originalCellIndex)<0&&this.columns(l[t].originalCellIndex).visible()&&(n+="`"+l[t].textContent+"`,");for(n=n.trim().substring(0,n.length-1),n+=") VALUES ",t=0;t<h.length;t++){for(n+="(",a=0;a<h[t].cells.length;a++)u.skipColumn.indexOf(l[a].originalCellIndex)<0&&this.columns(l[a].originalCellIndex).visible()&&(n+='"'+h[t].cells[a].textContent+'",');n=n.trim().substring(0,n.length-1),n+="),"}n=n.trim().substring(0,n.length-1),n+=";",u.download&&(n="data:application/sql;charset=utf-8,"+n)}else if("json"===u.type){for(a=0;a<h.length;a++)for(c[a]=c[a]||{},t=0;t<l.length;t++)u.skipColumn.indexOf(l[t].originalCellIndex)<0&&this.columns(l[t].originalCellIndex).visible()&&(c[a][l[t].textContent]=h[a].cells[t].textContent);n=JSON.stringify(c,u.replacer,u.space),u.download&&(n="data:application/json;charset=utf-8,"+n)}return u.download&&(u.filename=u.filename||"datatable_export",u.filename+="."+u.type,n=encodeURI(n),(o=document.createElement("a")).href=n,o.download=u.filename,i.appendChild(o),o.click(),i.removeChild(o)),n}}return!1},T.import=function(e){var t=!1,a={lineDelimiter:"\n",columnDelimiter:","};if(!s(e))return!1;if((e=d(a,e)).data.length||s(e.data)){if("csv"===e.type){t={data:[]};var i=e.data.split(e.lineDelimiter);i.length&&h(this.headings,function(a,n){t.data[n]=[];var s=i[n].split(e.columnDelimiter);s.length&&h(s,function(e){t.data[n].push(e)})})}else if("json"===e.type){var n=o(e.data);n?(t={headings:[],data:[]},h(n,function(e,a){t.data[a]=[],h(e,function(e,i){t.headings.indexOf(i)<0&&t.headings.push(i),t.data[a].push(e)})})):console.warn("That's not valid JSON!")}s(e.data)&&(t=e.data),t&&this.insert(t)}return!1},T.print=function(){var e=this.activeHeadings,a=this.activeRows,i=p("table"),n=p("thead"),s=p("tbody"),r=p("tr");h(e,function(e){r.appendChild(p("th",{html:e.textContent}))}),n.appendChild(r),h(a,function(e){var t=p("tr");h(e.cells,function(e){t.appendChild(p("td",{html:e.textContent}))}),s.appendChild(t)}),i.appendChild(n),i.appendChild(s);var o=t.open();o.document.body.appendChild(i),o.print()},T.setMessage=function(e){var t=1;this.hasRows&&(t=this.data[0].cells.length),this.clear(p("tr",{html:'<td class="dataTables-empty" colspan="'+t+'">'+e+"</td>"}))},T.columns=function(e){return new C(this,e)},T.rows=function(e){return new w(this,e)},T.on=function(e,t){this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t)},T.off=function(e,t){this.events=this.events||{},e in this.events!=!1&&this.events[e].splice(this.events[e].indexOf(t),1)},T.emit=function(e){if(this.events=this.events||{},e in this.events!=!1)for(var t=0;t<this.events[e].length;t++)this.events[e][t].apply(this,Array.prototype.slice.call(arguments,1))},y});