/*!
 *
 * Vanilla-DataTables
 * Copyright (c) 2015-2017 Karl Saunders (http://mobius.ovh)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 1.3.0
 *
 */
!function(t,e){var i="DataTable";"function"==typeof define&&define.amd?define([],e(i)):"object"==typeof exports?module.exports=e(i):t[i]=e(i)}(this,function(t){"use strict";var e=window,i=document,s=i.body,a={perPage:10,perPageSelect:[5,10,15,20,25],sortable:!0,searchable:!0,nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",truncatePager:!0,pagerDelta:2,fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}},n=function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];s&&"[object Object]"===Object.prototype.toString.call(s)?(t[i]=t[i]||{},n(t[i],s)):t[i]=s}return t},r=function(t,e,i){if("[object Object]"===Object.prototype.toString.call(t))for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(i,s,t[s]);else for(var a=0,n=t.length;a<n;a++)e.call(i,a,t[a])},o=function(t,e,i){t.addEventListener(e,i,!1)},l=function(t,e){var s=i.createElement(t);if(e&&"object"==typeof e){var a;for(a in e)"html"===a?s.innerHTML=e[a]:s.setAttribute(a,e[a])}return s},h=function(t){var e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e))&&e},d=function(t,e){if(t instanceof NodeList)r(t,function(t,i){d(i,e)});else if(e)for(;t.hasChildNodes();)t.removeChild(t.firstChild);else t.innerHTML=""},c=function(t,e,i){return l("li",{class:t,html:'<a href="#" data-page="'+e+'">'+i+"</a>"})},p={add:function(t,e){t.classList?t.classList.add(e):p.contains(t,e)||(t.className=t.className.trim()+" "+e)},remove:function(t,e){t.classList?t.classList.remove(e):p.contains(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "))},contains:function(t,e){if(t)return t.classList?t.classList.contains(e):!!t.className&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},u=function(){var t=this.options.perPage,e=this.activeRows;this.searching&&(e=[],r(this.searchData,function(t,i){e.push(this.activeRows[i])},this)),this.pages=e.map(function(i,s){return s%t==0?e.slice(s,s+t):null}).filter(function(t){return t}),this.totalPages=this.lastPage=this.pages.length},f=function(){if(this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);var t=this.currentPage-1,e=i.createDocumentFragment();switch(d(this.header,this.isIE),r(this.activeHeadings,function(t,e){this.header.appendChild(e)},this),r(this.pages[t],function(t,i){e.appendChild(i)},this),this.clear(e),this.onFirstPage=!1,this.onLastPage=!1,this.currentPage){case 1:this.onFirstPage=!0;break;case this.lastPage:this.onLastPage=!0}}var s,a=0,n=0,o=0;if(this.totalPages&&(o=(n=(a=this.currentPage-1)*this.options.perPage)+this.pages[a].length,n+=1,s=this.searching?this.searchData.length:this.rows.length),this.label&&this.options.labels.info.length){var l=this.options.labels.info.replace("{start}",n).replace("{end}",o).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",s);this.label.innerHTML=s?l:""}this.options.fixedHeight&&1==this.currentPage&&v.call(this)},g=function(){if(d(this.pagers,this.isIE),this.totalPages>1){var t="pager",e=i.createDocumentFragment(),s=this.onFirstPage?1:this.currentPage-1,a=this.onlastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(c(t,1,this.options.firstText)),this.options.nextPrev&&e.appendChild(c(t,s,this.options.prevText));var n=this.links;this.options.truncatePager&&(n=m(this.links,this.currentPage,this.pages.length,this.options.pagerDelta)),p.add(this.links[this.currentPage-1],"active"),r(n,function(t,i){p.remove(i,"active"),e.appendChild(i)}),p.add(this.links[this.currentPage-1],"active"),this.options.nextPrev&&e.appendChild(c(t,a,this.options.nextText)),this.options.firstLast&&e.appendChild(c(t,this.totalPages,this.options.lastText)),r(this.pagers,function(t,i){i.appendChild(e.cloneNode(!0))})}},b=function(t,e){var i,s;1===e?(i=0,s=t.length):-1===e&&(i=t.length-1,s=-1);for(var a=!0;a;){a=!1;for(var n=i;n!=s;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){var r=t[n],o=t[n+e],l=r;t[n]=o,t[n+e]=l,a=!0}}return t},v=function(){this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px"},m=function(t,e,i,s){var a,n=2*(s=s||2),o=e-s,h=e+s,d=[],c=[];e<4-s+n?h=3+n:e>i-(3-s+n)&&(o=i-(2+n));for(var u=1;u<=i;u++)if(1==u||u==i||u>=o&&u<=h){var f=t[u-1];p.remove(f,"active"),d.push(f)}return r(d,function(e,i){var s=i.children[0].getAttribute("data-page");if(a){var n=a.children[0].getAttribute("data-page");if(s-n==2)c.push(t[n]);else if(s-n!=1){var r=l("li",{class:"ellipsis",html:'<a href="#">&hellip;</a>'});c.push(r)}}c.push(i),a=i}),c},w=function(t){var e=!1,i=!1;if((t=t||this.options.data).headings){e=l("thead");var s=l("tr");r(t.headings,function(t,e){var i=l("th",{html:e});s.appendChild(i)}),e.appendChild(s)}t.rows&&(i=l("tbody"),r(t.rows,function(e,s){if(t.headings&&t.headings.length!==s.length)throw new Error("The number of rows do not match the number of headings.");var a=l("tr");r(s,function(t,e){var i=l("td",{html:e});a.appendChild(i)}),i.appendChild(a)})),e&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(e)),i&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(i))},x=function(t,e){var i=!1;if(e)switch(e){case"ISO_8601":i=moment(t,moment.ISO_8601).format("YYYYMMDD");break;case"RFC_2822":i=moment(t,"ddd, MM MMM YYYY HH:mm:ss ZZ").format("YYYYMMDD");break;case"MYSQL":i=moment(t,"YYYY-MM-DD hh:mm:ss").format("YYYYMMDD");break;case"UNIX":i=moment(t).unix();break;default:i=moment(t,e).format("YYYYMMDD")}return i},C=function(t,e){return this.dt=t,this.columns=e,this},y=C.prototype;y.select=function(){var t=this.columns;return Array.isArray(t)||(t=[]).push(this.columns),t},y.swap=function(){if(this.columns.length&&2===this.columns.length){var t=[];r(this.dt.headings,function(e,i){t.push(e)},this);var e=this.columns[0],i=this.columns[1],s=t[i];t[i]=t[e],t[e]=s,this.order(t)}},y.order=function(t){var e,i,s,a=[],n=[],o=[],l=[];r(t,function(t,i){a.push(this.dt.headings[i].cloneNode(!0)),this.dt.hiddenColumns.indexOf(i)<0&&((e=this.dt.headings[i].cloneNode(!0)).originalCellIndex=t,n.push(e))},this),r(this.dt.rows,function(e,a){i=a.cloneNode(),s=a.cloneNode(),null!==a.searchIndex&&void 0!==a.searchIndex&&(i.searchIndex=a.searchIndex,s.searchIndex=a.searchIndex),r(t,function(t,e){i.appendChild(a.cells[e].cloneNode(!0)),this.dt.hiddenColumns.indexOf(e)<0&&s.appendChild(a.cells[e].cloneNode(!0))},this),o.push(i),l.push(s)},this),this.dt.headings=a,this.dt.activeHeadings=n,this.dt.rows=o,this.dt.activeRows=l,this.dt.update()},y.hide=function(){var t=this.select();t.length&&(r(t,function(t,e){this.dt.hiddenColumns.indexOf(e)<0&&this.dt.hiddenColumns.push(e)},this),this.rebuild())},y.show=function(){var t=this.select();if(t.length){var e;r(t,function(t,i){(e=this.dt.hiddenColumns.indexOf(i))>-1&&this.dt.hiddenColumns.splice(e,1)},this),this.rebuild()}},y.visible=function(){var t;return isNaN(this.columns)?Array.isArray(this.columns)&&(t=[],r(this.columns,function(e,i){t.push(this.dt.hiddenColumns.indexOf(i)<0)},this)):t=this.dt.hiddenColumns.indexOf(this.columns)<0,t},y.hidden=function(){var t;return isNaN(this.columns)?Array.isArray(this.columns)&&(t=[],r(this.columns,function(e,i){t.push(this.dt.hiddenColumns.indexOf(i)>-1)},this)):t=this.dt.hiddenColumns.indexOf(this.columns)>-1,t},y.rebuild=function(){var t,e,i=[];this.dt.activeRows=[],this.dt.activeHeadings=[],r(this.dt.headings,function(t,e){e.originalCellIndex=t,this.dt.hiddenColumns.indexOf(t)<0&&this.dt.activeHeadings.push(e)},this),r(this.dt.rows,function(s,a){t=a.cloneNode(),e=a.cloneNode(),null!==a.searchIndex&&void 0!==a.searchIndex&&(t.searchIndex=a.searchIndex,e.searchIndex=a.searchIndex),r(a.cells,function(i,s){t.appendChild(s.cloneNode(!0)),this.dt.hiddenColumns.indexOf(s.cellIndex)<0&&e.appendChild(s.cloneNode(!0))},this),i.push(t),this.dt.activeRows.push(e)},this),this.dt.rows=i,this.dt.update()};var T=function(t,e){if(this.initialized=!1,this.options=n(a,e),"string"==typeof t){var i=t;if(!(t=document.querySelector(t)))throw new Error("The element '"+i+"' can not be found.")}if("table"!==t.tagName.toLowerCase())throw new Error("The selected element is not a table.");if(this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===t.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),t.tBodies.length&&!t.tBodies[0].rows.length&&this.options.data&&!this.options.data.rows)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=t,this.init()},P=T.prototype;return T.extend=function(t,e){"function"==typeof e?T.prototype[t]=e:T[t]=e},P.init=function(t){if(this.initialized||p.contains(this.table,"dataTable-table"))return!1;var e=this;this.options=n(this.options,t||{}),this.isIE=!!/(msie|trident)/i.test(navigator.userAgent),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.render(),this.options.plugins&&r(this.options.plugins,function(t,e){this[t](e)},this),this.options.columns&&r(this.options.columns,function(t,e){e.select&&(Array.isArray(e.select)||(e.select=[e.select]),r(e.select,function(t,i){var s=this.headings[i];e.type&&s.setAttribute("data-type",e.type),e.format&&s.setAttribute("data-format",e.format),e.hasOwnProperty("sortable")&&s.setAttribute("data-sortable",e.sortable),e.hasOwnProperty("hidden")&&!1!==e.hidden&&this.columns(i).hide()},this))},this),setTimeout(function(){e.emit("datatable.init"),e.initialized=!0},10)},P.render=function(){var t=this,e=t.options,i="";if(e.data&&w.call(t),e.ajax&&"string"==typeof e.ajax){var s=new XMLHttpRequest;o(s,"progress",function(e){t.emit("datatable.ajax.progress",e,s)}),o(s,"load",function(e){4===s.readyState&&(t.emit("datatable.ajax.loaded",e,s),200===s.status?(t.emit("datatable.ajax.success",e,s),t.import({type:"json",data:s.responseText})):t.emit("datatable.ajax.error",e,s))}),o(s,"error",function(e){t.emit("datatable.ajax.error",e,s)}),o(s,"abort",function(e){t.emit("datatable.ajax.abort",e,s)}),t.emit("datatable.ajax.loading",s),s.open("GET",e.ajax),s.send()}if(t.body=t.table.tBodies[0],t.head=t.table.tHead,t.foot=t.table.tFoot,t.body||(t.body=l("tbody"),t.table.appendChild(t.body)),t.hasRows=t.body.rows.length>0,!t.head){var a=l("thead"),n=l("tr");t.hasRows&&(r(t.body.rows[0].cells,function(t,e){n.appendChild(l("th"))}),a.appendChild(n)),t.head=a,t.table.insertBefore(t.head,t.body)}if(t.headings=[],t.hasHeadings=t.head.rows.length>0,t.hasHeadings&&(t.header=t.head.rows[0],t.headings=[].slice.call(t.header.cells)),e.header||t.head&&t.table.removeChild(t.table.tHead),e.footer?t.head&&!t.foot&&(t.foot=l("tfoot",{html:t.head.innerHTML}),t.table.appendChild(t.foot)):t.foot&&t.table.removeChild(t.table.tFoot),t.wrapper=l("div",{class:"dataTable-wrapper dataTable-loading"}),i+="<div class='dataTable-top'>",i+=e.layout.top,i+="</div>",i+="<div class='dataTable-container'></div>",i+="<div class='dataTable-bottom'>",i+=e.layout.bottom,i+="</div>",i=i.replace("{info}","<div class='dataTable-info'></div>"),e.perPageSelect){var h="<div class='dataTable-dropdown'><label>";h+=e.labels.perPage,h+="</label></div>";var d=l("select",{class:"dataTable-selector"});r(e.perPageSelect,function(t,i){var s=i===e.perPage,a=new Option(i,i,s,s);d.add(a)}),h=h.replace("{select}",d.outerHTML),i=i.replace("{select}",h)}else i=i.replace("{select}","");if(e.searchable){var c="<div class='dataTable-search'><input class='dataTable-input' placeholder='"+e.labels.placeholder+"' type='text'></div>";i=i.replace("{search}",c)}else i=i.replace("{search}","");t.hasHeadings&&this.renderHeader(),p.add(t.table,"dataTable-table");var u=l("div",{class:"dataTable-pagination"}),f=l("ul");u.appendChild(f),i=i.replace(/\{pager\}/g,u.outerHTML),t.wrapper.innerHTML=i,t.container=t.wrapper.querySelector(".dataTable-container"),t.pagers=t.wrapper.querySelectorAll(".dataTable-pagination"),t.label=t.wrapper.querySelector(".dataTable-info"),t.table.parentNode.replaceChild(t.wrapper,t.table),t.container.appendChild(t.table),t.rect=t.table.getBoundingClientRect(),t.rows=[].slice.call(t.body.rows),t.activeRows=t.rows.slice(),t.activeHeadings=t.headings.slice(),t.update(),e.fixedHeight&&v.call(t),e.fixedColumns&&t.activeHeadings.length&&t.fixColumns(),e.header||p.add(t.wrapper,"no-header"),e.footer||p.add(t.wrapper,"no-footer"),e.sortable&&p.add(t.wrapper,"sortable"),e.searchable&&p.add(t.wrapper,"searchable"),e.fixedHeight&&p.add(t.wrapper,"fixed-height"),e.fixedColumns&&p.add(t.wrapper,"fixed-columns"),t.bindEvents()},P.bindEvents=function(){var t=this,e=t.options;if(e.perPageSelect){var i=t.wrapper.querySelector(".dataTable-selector");i&&o(i,"change",function(i){e.perPage=parseInt(this.value,10),t.update(),e.fixedHeight&&v.call(t),t.emit("datatable.perpage")})}e.searchable&&(t.input=t.wrapper.querySelector(".dataTable-input"),t.input&&o(t.input,"keyup",function(e){t.search(this.value)})),o(t.wrapper,"click",function(i){var s=i.target;"a"===s.nodeName.toLowerCase()&&(i.preventDefault(),s.hasAttribute("data-page")?t.page(s.getAttribute("data-page")):e.sortable&&p.contains(s,"dataTable-sorter")&&"false"!=s.parentNode.getAttribute("data-sortable")&&t.sortColumn(t.activeHeadings.indexOf(s.parentNode)+1))})},P.renderHeader=function(){var t=this;r(t.headings,function(e,i){if(i.originalCellIndex=i.cellIndex,t.options.sortable){var s=l("a",{href:"#",class:"dataTable-sorter",html:i.innerHTML});i.innerHTML="",i.setAttribute("data-sortable",""),i.appendChild(s)}})},P.destroy=function(){this.options.sortable&&r(this.head.rows[0].cells,function(t,e){var i=e.firstElementChild.innerHTML;e.innerHTML=i,e.removeAttribute("style")},this);var t=i.createDocumentFragment();r(this.rows,function(e,i){t.appendChild(i)},this),this.clear(t),p.remove(this.table,"dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1},P.on=function(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)},P.off=function(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)},P.emit=function(t){if(this.events=this.events||{},t in this.events!=!1)for(var e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))},P.update=function(){u.call(this),f.call(this),this.links=[];for(var t=this.pages.length;t--;){var e=t+1;this.links[t]=c(0===t?"active":"",e,e)}this.sorting=!1,g.call(this),this.emit("datatable.update")},P.fixColumns=function(){var t,e=!1;if(this.columnWidths=[],this.table.tHead&&this.activeHeadings.length)r(this.activeHeadings,function(t,e){e.style.width=""},this),r(this.activeHeadings,function(t,e){var i=e.offsetWidth,s=i/this.rect.width*100;e.style.width=s+"%",this.columnWidths[t]=i},this);else{t=[],e=l("thead");var i=l("tr"),s=this.table.tBodies[0].rows[0].cells;r(s,function(e,s){var a=l("th");i.appendChild(a),t.push(a)}),e.appendChild(i),this.table.insertBefore(e,this.body);var a=[];r(t,function(t,e){var i=e.offsetWidth,s=i/this.rect.width*100;a.push(s),this.columnWidths[t]=i},this),r(this.rows,function(t,e){r(e.cells,function(t,e){this.columns(e.cellIndex).visible()&&(e.style.width=a[t]+"%")},this)},this),this.table.removeChild(e)}},P.search=function(t){if(!this.hasRows)return!1;var e=this;if(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],!t.length)return this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),p.remove(this.wrapper,"search-results"),!1;this.clear(),r(this.rows,function(i,s){var a=this.searchData.indexOf(s)>-1;t.split(" ").reduce(function(t,i){for(var a=!1,n=0;n<s.cells.length;n++)if(s.cells[n].textContent.toLowerCase().indexOf(i)>-1&&e.columns(s.cells[n].cellIndex).visible()){a=!0;break}return t&&a},!0)&&!a?(s.searchIndex=i,this.searchData.push(i)):s.searchIndex=null},this),p.add(this.wrapper,"search-results"),this.searchData.length||(p.remove(this.wrapper,"search-results"),this.setMessage(this.options.labels.noRows)),this.update(),this.emit("datatable.search",t,this.searchData)},P.page=function(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(f.call(this),g.call(this),void this.emit("datatable.page",t)))},P.sortColumn=function(t,i){if(t<1||t>this.activeHeadings.length)return!1;this.sorting=!0,t-=1;var s,a=this.rows,n=[],o=[],l=0,h=0,d=this.activeHeadings[t];t=d.originalCellIndex,r(a,function(i,s){var a=s.cells[t].textContent,r=a.replace(/(\$|\,|\s|%)/g,"");if("date"===d.getAttribute("data-type")&&e.moment){var c=!1;d.hasAttribute("data-format")&&(c=d.getAttribute("data-format")),r=x(a,c)}parseFloat(r)==r?o[h++]={value:Number(r),row:s}:n[l++]={value:a,row:s}});var c,u;p.contains(d,"asc")||"asc"==i?(c=b(n,-1),u=b(o,-1),s="descending",p.remove(d,"asc"),p.add(d,"desc")):(c=b(o,1),u=b(n,1),s="ascending",p.remove(d,"desc"),p.add(d,"asc")),this.lastTh&&d!=this.lastTh&&(p.remove(this.lastTh,"desc"),p.remove(this.lastTh,"asc")),this.lastTh=d,a=c.concat(u),this.rows=[];var f=[];r(a,function(t,e){this.rows.push(e.row),null!==e.row.searchIndex&&void 0!==e.row.searchIndex&&f.push(t)},this),this.searchData=f,this.columns().rebuild(),this.update(),this.emit("datatable.sort",t,s)},P.insert=function(t){if("[object Object]"!==Object.prototype.toString.call(t))throw new Error("Method insert requires an object.");if(!t.rows)throw new Error("Method insert requires the 'rows' property.");if(t.headings&&!this.hasHeadings&&!this.hasRows){var e,i=l("tr");r(t.headings,function(t,s){e=l("th",{html:s}),i.appendChild(e)}),this.head.appendChild(i),this.header=i,this.headings=[].slice.call(i.cells),this.hasHeadings=!0,this.options.sortable=this.initialSortable,this.renderHeader()}r(t.rows,function(t,e){var i=l("tr");r(e,function(t,e){var s=l("td",{html:e});i.appendChild(s)},this),this.rows.push(i)},this),this.columns().rebuild(),this.hasRows=!0,this.update(),this.options.fixedColumns&&this.fixColumns()},P.refresh=function(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")},P.clear=function(t){this.body&&d(this.body,this.isIE);var e=this.body;this.body||(e=this.table),t&&("string"==typeof t?e.innerHTML=t:e.appendChild(t))},P.export=function(t){if(!this.hasHeadings&&!this.hasRows)return!1;var e,i,a,r,o=this.activeHeadings,l=[],h=[],d={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4};if("[object Object]"!==Object.prototype.toString.call(t))return!1;if((t=n(d,t)).type){if("txt"!==t.type&&"csv"!==t.type||(l[0]=this.header),t.selection)if(isNaN(t.selection)){if(Array.isArray(t.selection))for(e=0;e<t.selection.length;e++)l=l.concat(this.pages[t.selection[e]-1])}else l=l.concat(this.pages[t.selection-1]);else l=l.concat(this.activeRows);if(l.length){if("txt"===t.type||"csv"===t.type){for(a="",e=0;e<l.length;e++){for(i=0;i<l[e].cells.length;i++)t.skipColumn.indexOf(i)<0&&this.columns(l[e].cells[i].cellIndex).visible()&&(a+=l[e].cells[i].textContent+t.columnDelimiter);a=a.trim().substring(0,a.length-1),a+=t.lineDelimiter}a=a.trim().substring(0,a.length-1),t.download&&(a="data:text/csv;charset=utf-8,"+a)}else if("sql"===t.type){for(a="INSERT INTO `"+t.tableName+"` (",e=0;e<o.length;e++)t.skipColumn.indexOf(e)<0&&this.columns(o[e].cellIndex).visible()&&(a+="`"+o[e].textContent+"`,");for(a=a.trim().substring(0,a.length-1),a+=") VALUES ",e=0;e<l.length;e++){for(a+="(",i=0;i<l[e].cells.length;i++)t.skipColumn.indexOf(i)<0&&this.columns(l[e].cells[i].cellIndex).visible()&&(a+='"'+l[e].cells[i].textContent+'",');a=a.trim().substring(0,a.length-1),a+="),"}a=a.trim().substring(0,a.length-1),a+=";",t.download&&(a="data:application/sql;charset=utf-8,"+a)}else if("json"===t.type){for(i=0;i<l.length;i++)for(h[i]=h[i]||{},e=0;e<o.length;e++)t.skipColumn.indexOf(e)<0&&this.columns(l[i].cells[e].cellIndex).visible()&&(h[i][o[e].textContent]=l[i].cells[e].textContent);a=JSON.stringify(h,t.replacer,t.space),t.download&&(a="data:application/json;charset=utf-8,"+a)}return t.download&&(t.filename=t.filename||"datatable_export",t.filename+="."+t.type,a=encodeURI(a),(r=document.createElement("a")).href=a,r.download=t.filename,s.appendChild(r),r.click(),s.removeChild(r)),a}}return!1},P.import=function(t){var e=!1,i={lineDelimiter:"\n",columnDelimiter:","};if("[object Object]"!==Object.prototype.toString.call(t))return!1;if((t=n(i,t)).data.length){if("csv"===t.type){e={rows:[]};var s=t.data.split(t.lineDelimiter);s.length&&r(s,function(i,s){e.rows[i]=[];var a=s.split(t.columnDelimiter);a.length&&r(a,function(t,s){e.rows[i].push(s)})})}else if("json"===t.type){var a=h(t.data);a?(e={headings:[],rows:[]},r(a,function(t,i){e.rows[t]=[],r(i,function(i,s){e.headings.indexOf(i)<0&&e.headings.push(i),e.rows[t].push(s)})})):console.warn("That's not valid JSON!")}e&&this.insert(e)}return!1},P.print=function(){var t=this.activeHeadings,i=this.activeRows,s=l("table"),a=l("thead"),n=l("tbody"),o=l("tr");r(t,function(t,e){o.appendChild(l("th",{html:e.textContent}))}),a.appendChild(o),r(i,function(t,e){var i=l("tr");r(e.cells,function(t,e){i.appendChild(l("td",{html:e.textContent}))}),n.appendChild(i)}),s.appendChild(a),s.appendChild(n);var h=e.open();h.document.body.appendChild(s),h.print()},P.setMessage=function(t){var e=1;this.hasRows&&(e=this.rows[0].cells.length),this.clear(l("tr",{html:'<td class="dataTables-empty" colspan="'+e+'">'+t+"</td>"}))},P.columns=function(t){return new C(this,t)},T});